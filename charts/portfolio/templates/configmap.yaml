apiVersion: v1
data:
  nginx.conf: "events {\n    worker_connections 1024;\n}\n\nhttp {\n    include       /etc/nginx/mime.types;\n
    \   default_type  application/octet-stream;\n\n    # Configuraciones de logging\n
    \   log_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n
    \                   '$status $body_bytes_sent \"$http_referer\" '\n                    '\"$http_user_agent\"
    \"$http_x_forwarded_for\"';\n\n    access_log /var/log/nginx/access.log main;\n
    \   error_log /var/log/nginx/error.log warn;\n\n    # Configuraciones de rendimiento\n
    \   sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout
    65;\n    types_hash_max_size 2048;\n\n    # Configuración de archivos estáticos\n
    \   server {\n        listen 80;\n        server_name localhost;\n\n        #
    Archivos estáticos de Django\n        location /static/ {\n            alias /var/www/static/;\n
    \           expires 30d;\n            add_header Cache-Control \"public, immutable\";\n
    \           \n            # Permitir listing de directorios para debugging\n            autoindex
    on;\n        }\n\n        # Archivos media (uploads, imágenes, etc.)\n        location
    /media/ {\n            alias /var/www/media/;\n            expires 30d;\n            add_header
    Cache-Control \"public, immutable\";\n            \n            # Permitir listing
    de directorios para debugging\n            autoindex on;\n        }\n\n        #
    Proxy para la aplicación Django (gunicorn)\n        location / {\n            proxy_pass
    http://localhost:8000;\n            proxy_set_header Host $host;\n            proxy_set_header
    X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n
    \           proxy_set_header X-Forwarded-Proto $scheme;\n            \n            #
    Configuraciones de proxy adicionales\n            proxy_connect_timeout 60s;\n
    \           proxy_send_timeout 60s;\n            proxy_read_timeout 60s;\n            \n
    \           # Buffer settings\n            proxy_buffering on;\n            proxy_buffer_size
    4k;\n            proxy_buffers 8 4k;\n        }\n\n        # Health check endpoint\n
    \       location /health {\n            access_log off;\n            return 200
    \"healthy\\n\";\n            add_header Content-Type text/plain;\n        }\n
    \   }\n}"
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: nginx-config